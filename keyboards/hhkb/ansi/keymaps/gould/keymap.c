/*  -*-  eval: (turn-on-orgtbl); -*-
 * default HHKB Layout
 */
#include QMK_KEYBOARD_H

#define _BL 0
#define _ML 1
#define _MD 2
#define _FL 3

#define _____ KC_NO

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

    /* BASE Level: Default Layer
     |-------+---+---+------+---+---+---+---+------+---+---+-------+-----+-------+-----;
     |  ~`   | 1 | 2 |  3   | 4 | 5 | 6 | 7 |  8   | 9 | 0 | -     | =   |       |     |
     |-------+---+---+------+---+---+---+---+------+---+---+-------+-----+-------+-----|
     | Tab   | Q | W |  E   | R | T | Y | U |  I   | O | P | [     | ]   |     \       |
     |       |_MD|   | LGUI |   |   |   |   | RGUI |   |   |       |     |             |
     |-------+---+---+------+---+---+---+---+------+---+---+-------+-----+-------------|
     | ESC   | A | S |  D   | F | G | H | J |  K   | L | ; | '     |   Enter           |
     |       |_ML|ALT| CTL  |SFT|   |   |SFT| CTL  |ALT|   |       |                   |
     |-------+---+---+------+---+---+---+---+------+---+---+-------+--------+----------|
     |BackSpc| Z | X |  C   | V | B | N | M |  ,   | . | / | Del   |   Fn0  |          |
     |-------+---+---+------+---+---+---+---+------+---+---+-------+--------+----------|

            |------+------+-----------------------+------+------|
            |      |      |       Space/_FL       | App  |      |
            |------+------+-----------------------+------+------|
    */

    [_BL] = LAYOUT( //  default layer
        KC_GRV, KC_1, KC_2, KC_3, KC_4, KC_5, KC_6, KC_7, KC_8, KC_9, KC_0, KC_MINS, KC_EQL, _____, _____,
        KC_TAB, LT(_MD,KC_Q), KC_W, MT(MOD_LGUI, KC_E), KC_R, KC_T, KC_Y, KC_U, MT(MOD_RGUI,KC_I), KC_O, KC_P, KC_LBRC, KC_RBRC, KC_BSLS,
        KC_ESC, LT(_ML,KC_A), MT(MOD_LALT,KC_S), MT(MOD_LCTL,KC_D), MT(MOD_LSFT,KC_F), KC_G, KC_H, MT(MOD_RSFT,KC_J), MT(MOD_RCTL,KC_K), MT(MOD_LALT,KC_L), KC_SCLN, KC_QUOT, KC_ENT,
        KC_BSPC, KC_Z, KC_X, KC_C, KC_V, KC_B, KC_N, KC_M, KC_COMM, KC_DOT, KC_SLSH, KC_DEL, _____,
        _____, _____, /*        */ LT(_FL,KC_SPC), KC_APP, _____),

    /* Layer _MV: Movement Layer
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-------|
      |      |     |     |     |    |    |    |    |     |     |     |     |       |       |       |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-------|
      |      |     |     | LGUI|    |    |    |Home| Up  | End | Ins |     |       |       |CpsLck |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-------|
      |      |     | ALT | CTL | SFT|    |    | <- | Dn  | ->  |     |     |       |       |       |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-------|
      |      |     |     |     |    |    |    |    | PgUp|     |PgDn |     |       |       |       |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-------|

                 |------+------+----------------------+------+------+
                 |      |      |       Enter          |      |      |
                 |------+------+----------------------+------+------+

     */

    [_ML] = LAYOUT(
        _____, _____, _____,   _____,   _____,   _____, _____,   _____,   _____,   _____,    _____,  _____, _____, _____, _____,
        _____, _____, _____,   KC_TRNS,   _____,   _____, _____, KC_HOME, KC_UP,   KC_END,   KC_INS, _____, _____, KC_CAPS,
        _____, _____, KC_TRNS, KC_TRNS, KC_TRNS, _____, _____,   KC_LEFT, KC_DOWN, KC_RIGHT, _____,  _____, _____,
        _____, _____, _____,   _____,   _____,   _____, _____,   KC_PGUP, _____,   KC_PGDN,  _____,  _____, _____,
        _____, _____, KC_ENT,  _____,   _____),



    /* Layer _MD: Media Layer
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     |     |     |    |    |    |    |     |     |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     |     |     |    |    |    |Play| VOL+|     |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     |     |     |    |    |    |<== | VOL-| ==> |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     |     |     |    |    |    |    |     |     |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|

                 |------+------+----------------------+------+------+
                 |      |      |                      |      |      |
                 |------+------+----------------------+------+------+

     */

    [_MD] = LAYOUT(
        _____, _____, _____,   _____,   _____,   _____, _____,   _____,    _____,   _____,    _____,  _____, _____, _____, _____,
        _____, _____, _____,   _____,   _____,   _____, _____,   KC_MPLY,  KC_VOLU, _____,    _____, _____, _____, _____,
        _____, _____, _____,   _____,   _____,   _____, _____,   KC_MPRV,  KC_VOLD, KC_MNXT,  _____,  _____, _____,
        _____, _____, _____,   _____,   _____,   _____, _____,   _____,    _____,   _____,    _____,  _____, _____,
        _____, _____, _____,  _____,   _____),


    /* Layer _FL: Function Layer
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      | F1  | F2  | F3  | F4 | F5 | F6 | F7 | F8  | F9  | F10 | F11 | F12   |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     |     | LGUI|    |    |    |    |RGUI |     |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     | ALT | CTL |SFT |    |    |SFT | CTL |ALT  |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|
      |      |     |     |     |    |    |    |    |     |     |     |     |       |       |     |
      |------+-----+-----+-----+----+----+----+----+-----+-----+-----+-----+-------+-------+-----|

                 |------+------+----------------------+------+------+
                 |      |      |                      |      |      |
                 |------+------+----------------------+------+------+

     */

    [_FL] = LAYOUT(
        _____, KC_F1, KC_F2,   KC_F3,   KC_F4,   KC_F5, KC_F6, KC_F7,   KC_F8,   KC_F9,   KC_F10, KC_F11, KC_F12, _____, _____,
        _____, _____, _____,   KC_TRNS, _____,   _____, _____, _____,   KC_TRNS, _____,   _____,  _____,  _____, _____,
        _____, _____, KC_TRNS, KC_TRNS, KC_TRNS, _____, _____, KC_TRNS, KC_TRNS, KC_TRNS, _____,  _____,  _____,
        _____, _____, _____,   _____,   _____,   _____, _____, _____,   _____,   _____,   _____,  _____,  _____,
        _____, _____, _____,   _____,   _____)
};

const uint16_t PROGMEM fn_actions[] = {

};

const macro_t *action_get_macro(keyrecord_t *record, uint8_t id, uint8_t opt)
{
    // MACRODOWN only works in this function
    switch (id)
    {
    case 0:
        if (record->event.pressed)
        {
            register_code(KC_RSFT);
        }
        else
        {
            unregister_code(KC_RSFT);
        }
        break;
    }
    return MACRO_NONE;
};
